{% extends 'base.html' %}

{% block title %}
Call-ka Phone
{% endblock %}

{% block content %}
<div class="card-with-shadow" style="min-width: 400px;">
    <nav class="navbar-container">
        <a style="display: flex;" href="/">
            <h1>Call-ka</h1>
            <p>phone</p>
        </a>
    </nav>
    <div style="padding: 10px; margin: 8 auto;">
        {% if 'user_id' in session %}
            <nav class="navbar-container" style="padding: 0px;">
                <h3>Your phone number: {{ session.user_phone_number }}</h3>
                <a href="/logout" class="del-button button-with-shadow">Logout</a>
            </nav>
            <div id="dial-pad">
                <input class="button-with-shadow" type="text" id="number-input" placeholder="Enter phone number">
                <div class="keypad">
                    <button class="digit s-button button-with-shadow">1</button>
                    <button class="digit s-button button-with-shadow">2</button>
                    <button class="digit s-button button-with-shadow">3</button>
                    <button class="digit s-button button-with-shadow">4</button>
                    <button class="digit s-button button-with-shadow">5</button>
                    <button class="digit s-button button-with-shadow">6</button>
                    <button class="digit s-button button-with-shadow">7</button>
                    <button class="digit s-button button-with-shadow">8</button>
                    <button class="digit s-button button-with-shadow">9</button>
                    <button class="digit s-button button-with-shadow">*</button>
                    <button class="digit s-button button-with-shadow">0</button>
                    <button class="digit s-button button-with-shadow">#</button>
                    <button class="del-button button-with-shadow" id="backspace-btn">‚Üê</button>
                    <button class="accept-button grid-column-snap-2 button-with-shadow" id="call-btn">Call</button>
                </div>
            </div>
            <div id="call-status" style="display: none;">
                <h3>Call Status: <span id="status-text"></span></h3>
                <button class="del-button button-with-shadow" id="end-call-btn">Hang Up</button>
                <button class="s-button button-with-shadow" id="toggle-mute-btn">Mute</button>
                <input type="range" id="volume-control" min="0" max="1" step="0.1" value="1">
            </div>
            <div id="incoming-call" style="display: none;">
                <h3>Incoming call from: <span id="caller-number"></span></h3>
                <button class="accept-button button-with-shadow" id="accept-call-btn">Accept</button>
                <button class="del-button button-with-shadow" id="decline-call-btn">Decline</button>
            </div>
        {% else %}
            <h2>Welcome!</h2>
            <h2>Please, <a href="/login" style="color: #4f50d7;">login</a> or <a href="/register" style="color: #4f50d7;">register</a> to get started!</h2>
        {% endif %}
    </div>
</div>

<link type="text/css"  href="{{ url_for('static', filename='css/card-with-shadow.css') }}" rel="stylesheet">
<link type="text/css"  href="{{ url_for('static', filename='css/buttons.css') }}" rel="stylesheet">

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.js"></script>

<script src="{{ url_for('static', filename='js/main.js') }}"></script>
<script src="{{ url_for('static', filename='js/call.js') }}"></script>
{% endblock %}